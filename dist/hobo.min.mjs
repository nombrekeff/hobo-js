class t{constructor(t=[]){this.classNames=[],this.classNames=t}copy(){const e=new t;return e.classNames=[...this.classNames],e}raw(){return this.classNames.join(" ")}add(...t){for(const e of t)this.has(e)||this.classNames.push(e);return this}remove(...t){for(const e of t){if(!this.has(e))return this;const t=this.classNames.indexOf(e);this.classNames.splice(t,1)}return this}has(t){return this.classNames.includes(t)}}class e{constructor(){this.styles={}}copy(){const t=new e;return t.styles=Object.assign({},this.styles),t}set(t,e){return this.styles[t]=e,this}remove(...t){for(const e of t)delete this.styles[e];return this}has(t){return t in this.styles}}class s{constructor(){this.className=new t,this.style=new e,this.additionalAttributes={}}copy(){const t=new s;return t.className=this.className.copy(),t.id=this.id,t.style=this.style.copy(),t.additionalAttributes=Object.assign({},this.additionalAttributes),t}set(t,e){return this.additionalAttributes[t]=e,this}remove(...t){for(const e of t)delete this.additionalAttributes[e];return this}has(t){return t in this.additionalAttributes}}const a=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],r=["style","script"];class n extends Function{constructor(){super("...args","return this.__self__.__call__(...args)");var t=this.bind(this);return this.__self__=t,t}__call__(...t){}}class i extends n{get className(){return this.attr.className}get tagId(){return this.attr.id}constructor(t,...e){super(),this.children=[],this.attr=new s,this._meta={selfClosing:!1,storesChildren:!1,storage:!1},this.setTagName(t),this.children.push(...e)}copy(){const t=new i(this.tagName,...this.children);return t.attr=this.attr.copy(),t._parent=this._parent,t._meta=Object.assign(Object.assign({},this._meta),t._meta),t}setTagName(t){return this.tagName=this.sanitizeTagName(t),this.validateTagName(this.tagName),this._meta=Object.assign(Object.assign({},this._meta),this.getMetaForTag(this.tagName)),this}b(...t){return this.build(...t)}build(...t){return this.__call__(...t)}__call__(...t){let e=[...this.children,...t];this._meta.storesChildren&&(this._meta.storage=t,e=[]);const s=new d(this.tagName,e,this.attr,this._meta);return this._parent&&this._parent.children.push(s),s}get a(){return this.copy()}get attach(){return this.copy()}p(t){const e=this.copy();return e._parent=t,e}id(t){const e=this.copy();return e.attr.id=t,e}text(t){const e=this.copy();return e.children=[t],e}append(...t){if(this._meta.selfClosing)return this;const e=this.copy();return e.children.push(...t.map((t=>t instanceof i?t.b():t))),e}setChildren(t){const e=this.copy();return e.children=t,e}store(t){const e=this.copy();return e._meta.storage=t,e}m(t){return this.mod(t)}mod(t){const e=this.copy();return t(e),e}mc(t){return this.modClass(t)}modClass(t){return this.copy().m((e=>t(e.className)))}ac(...t){return this.addClass(...t)}addClass(...t){const e=this.copy();return e.className.add(...t),e}rc(...t){return this.rmClass(...t)}rmClass(...t){const e=this.copy();return e.className.remove(...t),e}aa(t,e){return this.addAttr(t,e)}addAttr(t,e){const s=this.copy();return s.attr.set(t,e),s}sa(t){return this.setAttr(t)}setAttr(t){const e=this.copy();return e.attr.additionalAttributes=Object.assign(Object.assign({},e.attr.additionalAttributes),t),e}ra(...t){return this.rmAttr(...t)}rmAttr(...t){const e=this.copy();return e.attr.remove(...t),e}as(t,e){return this.addStyle(t,e)}addStyle(t,e){const s=this.copy();return s.attr.style.set(t,e),s}ss(t){return this.setStyles(t)}setStyles(t){const e=this.copy();return e.attr.style.styles=Object.assign(Object.assign({},e.attr.style.styles),t),e}rs(...t){return this.rmStyle(...t)}rmStyle(...t){const e=this.copy();return e.attr.style.remove(...t),e}getMetaForTag(t){return{selfClosing:this.isSelfClosingTag(t),storesChildren:this.isStorableTag(t),storage:null}}isSelfClosingTag(t){return a.includes(t)}isStorableTag(t){return r.includes(t)}validateTagName(t){if(!/[a-zA-Z_][a-z-A-Z0-9_]*/.test(t))throw new Error(`Invalid tag name "${t}"`)}sanitizeTagName(t){return t.replace(/[^\w\d-_]/,"")}}function o(t,...e){return new i(t,...e)}const c=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","a","abbr","acronym","address","article","aside","audio","b","basefont","bdi","bdo","big","blockquote","body","button","canvas","caption","center","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video"];let l={tag:o};for(let t of c)l[t]=o(t);const h=l;class d{get className(){return this.attr.className}get tagId(){return this.attr.id}constructor(t,e,a,r){this.children=[],this.attr=new s,this._meta={selfClosing:!1,storesChildren:!1,storage:!1},this.tagName=t,this.children=e,this.attr=a,this._meta=r}append(t){t instanceof i&&(t=t.b()),this.children.push(t)}findByTagName(t){return this.findOneBy((e=>e.tagName==t))}findOneBy(t){const e=[];for(e.push(this);e.length>0;){let s=e.pop();if(t(s))return s;if(s.children&&s.children.length)for(let t=0;t<s.children.length;t+=1)this.children[t]instanceof d&&e.push(s.children[t])}return null}}const u=t=>t.replace(/([A-Z])/g,(t=>`-${t.toLowerCase()}`));class g{constructor(t=!0){this.beautify=t}generateCss(t){let e=t instanceof Array?t:[t],s="";for(const t of e)for(const e in t)s+=this.generateBlock(e,t[e]);return s}generateBlock(t,e){let s=this.generateBlockContent(e);return`${u(t)} {${s}}`}generateBlockContent(t){let e="";for(const s in t)t[s]&&(e+=this.generateStyle(s,t[s]));return e}generateStyle(t,e){return`${u(t)}:${e};`}}var m;!function(t){t[t.none=0]="none",t[t.body=1]="body",t[t.html=2]="html",t[t.head=3]="head"}(m||(m={}));let p={attachedTag:null,attachedTagStack:[],globalStuff:[]};function y(t="New Hobo Document",e=m.body){const s=w.head.aa("lang","en").build(w.meta.addAttr("charset","UTF-8"),w.meta.setAttr({name:"viewport",content:"width=device-width, initial-scale=1.0"}),w.title(t)),a=w.body.build(),r=w.html.build(s,a);switch(e){case m.html:f(r);break;case m.head:f(r.findByTagName("head"));break;case m.body:f(r.findByTagName("body"));case m.none:}return{doc:r,head:s,body:a}}function f(t){p.attachedTag&&p.attachedTagStack.push(p.attachedTag),p.attachedTag=t}function b(){p.attachedTagStack.length>0?p.attachedTag=p.attachedTagStack.pop():p.attachedTag=null}function _(t){const e=()=>p.attachedTag?t.p(p.attachedTag):t;return Object.defineProperty(t,"a",{get:e}),Object.defineProperty(t,"attach",{get:e}),t}const N={};for(let t in h)N[t]=_(h[t]);const T=new class{constructor(){this.cssGenerator=new g,this.beautifyCss=!0}generateHtml(t){return this._generateTag(t)}_generateTag(t){if("style"==t.tagName)return this._createTag(t,this.cssGenerator.generateCss(t._meta.storage));if("script"==t.tagName)return this._createTag(t,this._generateScriptContent(t._meta.storage));let e="";for(const s of t.children){let t=s;s instanceof i&&(t=s.b()),e+=t instanceof d?this._generateTag(t):s}return this._createTag(t,e)}_createTag(t,e){const s=this._generateAttributeString(t);let a=[t.tagName,s].filter((t=>t)).join(" ");return t._meta.selfClosing?`<${a}/>`:`<${a}>${e}</${t.tagName}>`}_generateAttributeString(t){let e="";t.attr.id&&(e+=this._attr("id",t.attr.id)),e+=this._attr("class",t.attr.className.raw()),e+=this._generateInlineStyle(t);for(const s in t.attr.additionalAttributes)e+=this._attr(s,t.attr.additionalAttributes[s]);return e}_generateInlineStyle(t){let e=this.cssGenerator.generateBlockContent(t.attr.style.styles);return this._attr("style",e)}_generateScriptContent(t){let e="";if(t instanceof Function)e+=function(t){let e=t.toString();return e=e.replace(/^(.*{)/,""),e=e.replace(/}$/,""),e=e.replace(/^\(.*\)\s?=>\s?{/,""),e.trim()}(t);else if(t instanceof Array)for(const s of t)e+=this._generateScriptContent(s);return e}_attr(t,e){return e?`${t}="${e}"`:""}};function C(t){return T.generateHtml(t)}const w=N;export{d as Tag,i as TagBuilder,p as _context,f as attach,w as builders,b as detach,y as doc,C as generate};